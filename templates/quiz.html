{% extends "base.html" %}
{% block content %}
  <div class="main-content card col-8" id="chat-window">
    <div class="card-header">
      <h2 class="card-title mb-0">Interactive Quiz Chat</h2>
    </div>
    <div class="card-body" id="chat-body">
      {% for message in messages %}
        {% if message["role"] == "user" %}
          <div class="row">
            <div class="col-8 offset-4">
              <p class="user-message">{{ message["content"] }}</p>
            </div>
          </div>
        {% else %}
          <div class="row">
            <div class="col-8">
              <p class="ai-message">{{ message["content"] }}</p>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
    <div class="m-3">
      <form
        action="#"
        method="POST"
        class="input-group"
        id="message-form"
        autocomplete="off"
      >
        <textarea
          name="message"
          class="form-control"
          placeholder="Type your message here"
          rows="1"
          autofocus
        ></textarea>
        <button class="btn btn-primary">Send</button>
      </form>
    </div>
  </div>
  <div class="side-menu col">
    {% macro is_selected_model(model) %}
      {% if selected_model == model %}
        selected
      {% endif %}
    {% endmacro %}

    <form action="{{ url_for('quiz') }}" method="POST" class="mb-2">
      <label for="select-quiz-model">Select a model</label>
      <select name="model" id="select-quiz-model" onchange="this.form.submit()">
        <option value="GPT-3.5" {{ is_selected_model('GPT-3.5') }}>
          GPT-3.5
        </option>
        <option value="GPT-4" {{ is_selected_model('GPT-4') }}>GPT-4</option>
        <option value="Test mode" {{ is_selected_model('Test mode') }}>
          Test mode
        </option>
      </select>
    </form>
    <form action="#" method="POST" id="quiz-form">
      <button class="btn btn-primary" form="quiz-form">Start quiz</button>
    </form>
  </div>
{% endblock %}
